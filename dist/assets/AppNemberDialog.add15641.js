import{u as $}from"./useFormApi.4f9fd1b3.js";import{u as G}from"./useHooks.2cd27d9b.js";import{d as H,p as A,n as x,o as K,r as c,b as f,y as g,w as _,e,G as L,C as D,f as n,u as t,B as d,z as E,c as O}from"./index.b9160266.js";import"./_commonjsHelpers.dffb1198.js";const P={class:"text-xl font-semibold"},Z={class:"mr-2 text-primary"},q={class:"field flex flex-column"},J={class:"mb-2"},Q={class:"font-semibold mt-2"},W=d(" ID "),X=e("span",{class:"text-red-300"},"*",-1),Y={class:"text-xs font-normal"},ee={class:"p-inputgroup"},oe=e("span",{class:"p-inputgroup-addon"},[e("i",{class:"pi pi-bolt"})],-1),se={class:"grid"},te={class:"col-12 md:col"},ue=e("label",{class:"font-semibold mt-2"},[d(" \u30E1\u30F3\u30D0\u30FC\u5199\u771F "),e("span",{class:"text-xs font-normal"},"\uFF08\u63A8\u59683:4\uFF09"),e("span",{class:"text-red-300"},"*")],-1),le={key:0,class:"col-12 md:col flex flex-column"},ae=e("label",{class:"font-semibold mt-2"},"\u5199\u771F\u30D7\u30EC\u30D3\u30E5\u30FC",-1),ne={class:"ra-bg pt-1 flex justify-content-center align-items-center"},ie={class:"grid"},de={class:"col-12 md:col"},ce=e("label",{class:"font-semibold"},[d("\u6C0F\u540D"),e("span",{class:"text-red-300"},"*")],-1),pe={class:"p-inputgroup mb-1"},re=e("span",{class:"p-inputgroup-addon"},[e("i",{class:"pi pi-list"})],-1),me={class:"col-12 md:col"},_e=e("label",{class:"font-semibold"},[d(" \u30AB\u30BF\u30AB\u30CA "),e("span",{class:"text-red-300"},"*"),e("span",{class:"text-xs font-normal"},"\uFF08\u5168\u89D2\u30AB\u30BF\u30AB\u30CA\uFF09")],-1),be={class:"p-inputgroup mb-1"},Ce=e("span",{class:"p-inputgroup-addon"},[e("i",{class:"pi pi-list"})],-1),fe={class:"grid"},De={class:"col-12 md:col"},Be=e("label",{class:"font-semibold"},[d("\u8077\u52D9"),e("span",{class:"text-red-300"},"*")],-1),Fe={class:"p-inputgroup mb-1"},he=e("span",{class:"p-inputgroup-addon"},[e("i",{class:"pi pi-briefcase"})],-1),ve={class:"col-12 md:col"},Ae=e("label",{class:"font-semibold"},[d("\u7A2E\u65CF"),e("span",{class:"text-red-300"},"*")],-1),xe={class:"p-inputgroup mb-1"},ge=e("span",{class:"p-inputgroup-addon"},[e("i",{class:"pi pi-users"})],-1),Ee={class:"mb-2"},Ve=e("label",{class:"font-semibold"},[d("\u30B9\u30AD\u30EB"),e("span",{class:"text-red-300"},"*")],-1),ke={class:"p-inputgroup mb-1"},we=e("span",{class:"p-inputgroup-addon"},[e("i",{class:"pi pi-book"})],-1),ye={class:"mt-2 md:mt-0"},Ne=H({name:"AppNemberDialog",props:{visible:{type:Boolean},mode:null,form:null},emits:["colse","confirm"],setup(V,{emit:B}){const r=V,{errorToast:k}=G(),{getFormItems:b}=$();let s=A(r.form),p=A({name:[],job:[],race:[]});const w=a=>new Promise((o,i)=>{const u=new FileReader;u.onloadend=()=>o(u.result),u.readAsDataURL(a),u.onerror=()=>{i(k("\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u5931\u6557"))}}),y=async a=>{await w(a.files[0]).then(o=>{s.photo=o})},F=(a,o)=>{p[a].map(i=>{i.value===o&&(s[a]=i.text)})},j=a=>{var i;const o=new Map([[1,"\u30A2\u30A4\u30A6\u30A8\u30AA"],[2,"\u30AB\u30AD\u30AF\u30B1\u30B3\u30AC\u30AE\u30B0\u30B2\u30B4"],[3,"\u30B5\u30B7\u30B9\u30BB\u30BD\u30B6\u30B8\u30BA\u30BC\u30BE"],[4,"\u30BF\u30C1\u30C4\u30C6\u30C8\u30C0\u30C2\u30C5\u30C7\u30C9"],[5,"\u30CA\u30CB\u30CC\u30CD\u30CE"],[6,"\u30CF\u30D2\u30D5\u30D8\u30DB\u30D1\u30D4\u30D7\u30DA\u30DD\u30D0\u30D3\u30D6\u30D9\u30DC"],[7,"\u30DE\u30DF\u30E0\u30E1\u30E2"],[8,"\u30E4\u30E6\u30E8"],[9,"\u30E9\u30EA\u30EB\u30EC\u30ED"],[10,"\u30EF\u30F2\u30F3"]]);for(let u=1;u<11;u++)if(((i=o.get(u))==null?void 0:i.indexOf(a))!==-1)return u.toString();return"11"};let m=x(!1),C=x("");const U=["name","nameSpell","job","race","photo","skill"],I=/^[-－﹣−‐⁃‑‒–—﹘―⎯⏤ーｰ─━ a-z A-Z ａ-ｚ Ａ-Ｚ ァ-ンヴーｧ-ﾝﾞﾟ]*$/,S=()=>{if(m.value=!1,!I.test(s.nameSpell)){m.value=!0,C.value="\u30AB\u30BF\u30AB\u30CA\u3067\u5168\u89D2\u30AB\u30CA\u3067\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044";return}U.map(a=>{if(s[a]===""){m.value=!0,C.value="\u672A\u5165\u529B\u9805\u76EE\u304C\u3042\u308A\u307E\u3059";return}})},N=()=>{F("job",s.jobCode),F("race",s.raceCode),s.nameCode=j(s.nameSpell.substring(0,1))},T=async()=>{await N(),await S(),m.value||B("confirm",s)};return K(async()=>{p.name=await b("name"),p.job=await b("job"),p.race=await b("race")}),(a,o)=>{const i=c("Message"),u=c("InputText"),z=c("FileUpload"),M=c("Image"),h=c("Dropdown"),v=c("Button"),R=c("Dialog");return f(),g(R,{visible:r.visible,breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"40vw"},modal:!0,closable:!1},{header:_(()=>[e("div",P,[e("span",Z,[e("i",{class:L([r.mode==="create"?"pi pi-plus":"pi pi-pencil"])},null,2)]),e("span",null,D(r.mode==="create"?"\u65B0\u898F\u4F5C\u6210":"\u7DE8\u96C6"),1)])]),footer:_(()=>[e("div",ye,[n(v,{label:"\u53D6\u6D88",icon:"pi pi-times",class:"p-button-outlined p-button-warning",onClick:o[6]||(o[6]=l=>B("colse"))}),n(v,{label:"\u6C7A\u5B9A",icon:"pi pi-check",onClick:o[7]||(o[7]=l=>T())})])]),default:_(()=>[t(m)?(f(),g(i,{key:0,severity:"error"},{default:_(()=>[d(D(t(C)),1)]),_:1})):E("",!0),e("div",q,[e("div",J,[e("label",Q,[W,X,e("span",Y,D(r.mode==="create"?"\uFF08\u81EA\u52D5\u3067ID\u3092\u632F\u308A\u307E\u3059\uFF09":"\uFF08ID\u306E\u7DE8\u96C6\u306F\u3067\u304D\u307E\u305B\u3093\uFF09"),1)]),e("div",ee,[oe,n(u,{modelValue:t(s).id,"onUpdate:modelValue":o[0]||(o[0]=l=>t(s).id=l),maxlength:"5",disabled:""},null,8,["modelValue"])])]),e("div",se,[e("div",te,[ue,n(z,{mode:"basic",accept:"image/*","max-file-size":5242880,"choose-label":"\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9",auto:!0,"custom-upload":!0,onUploader:y})]),t(s).photo!==""?(f(),O("div",le,[ae,e("div",ne,[n(M,{src:t(s).photo,alt:"Image",width:"60",height:"80"},null,8,["src"])])])):E("",!0)]),e("div",ie,[e("div",de,[ce,e("div",pe,[re,n(u,{modelValue:t(s).name,"onUpdate:modelValue":o[1]||(o[1]=l=>t(s).name=l),maxlength:"10"},null,8,["modelValue"])])]),e("div",me,[_e,e("div",be,[Ce,n(u,{modelValue:t(s).nameSpell,"onUpdate:modelValue":o[2]||(o[2]=l=>t(s).nameSpell=l),maxlength:"20"},null,8,["modelValue"])])])]),e("div",fe,[e("div",De,[Be,e("div",Fe,[he,n(h,{modelValue:t(s).jobCode,"onUpdate:modelValue":o[3]||(o[3]=l=>t(s).jobCode=l),options:t(p).job,"option-label":"text","option-value":"value"},null,8,["modelValue","options"])])]),e("div",ve,[Ae,e("div",xe,[ge,n(h,{modelValue:t(s).raceCode,"onUpdate:modelValue":o[4]||(o[4]=l=>t(s).raceCode=l),options:t(p).race,"option-label":"text","option-value":"value"},null,8,["modelValue","options"])])])]),e("div",Ee,[Ve,e("div",ke,[we,n(u,{modelValue:t(s).skill,"onUpdate:modelValue":o[5]||(o[5]=l=>t(s).skill=l),maxlength:"20"},null,8,["modelValue"])])])])]),_:1},8,["visible"])}}});export{Ne as default};
